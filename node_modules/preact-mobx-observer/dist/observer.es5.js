(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('mobx')) :
    typeof define === 'function' && define.amd ? define(['exports', 'mobx'], factory) :
    (global = global || self, factory(global.observer = {}, global.mobx));
}(this, function (exports, mobx) { 'use strict';

    var augment = function (object, key, func) {
        var origMethod = object[key];
        object[key] = function () {
            func.apply(this, arguments);
            if (origMethod) {
                return origMethod.apply(this, arguments);
            }
        };
    };
    var mobxReaction = Symbol("mobxReaction");
    var observer = function (comp) {
        var componentClass = comp;
        augment(componentClass.prototype, "componentWillMount", function () {
            var _this = this;
            var compName = this.constructor.displayName || this.constructor.name;
            this[mobxReaction] = new mobx.Reaction(compName + ".render()", function () { return _this.setState({}); });
        });
        augment(componentClass.prototype, "componentWillUnmount", function () {
            this[mobxReaction].dispose();
            this[mobxReaction] = null;
        });
        var origRender = componentClass.prototype.render;
        componentClass.prototype.render = function (props, state, context) {
            var _this = this;
            var renderResult;
            this[mobxReaction].track(function () {
                renderResult = origRender.call(_this, props, state, context);
            });
            return renderResult;
        };
    };

    exports.observer = observer;

    Object.defineProperty(exports, '__esModule', { value: true });

}));
//# sourceMappingURL=observer.es5.js.map
